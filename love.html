<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Gift for Khacee</title>
    <style>
        :root {
            --primary: #ff2a6d;
            --secondary: #05d9e8;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1a1a2e 0%, #000 100%);
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; font-family: 'Segoe UI', sans-serif;
        }

        .stars-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
        }

        .container {
            perspective: 1200px;
            z-index: 10;
            cursor: pointer;
        }

        /* 3D Box Container */
        .gift-box {
            width: 200px; height: 200px;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(-20deg) rotateY(45deg);
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .floating { animation: floatAndGlow 4s infinite ease-in-out; }

        .jiggle-container {
            width: 100%; height: 100%;
            transform-style: preserve-3d;
            animation: temptingJiggle 4s infinite;
        }

        .container.open .gift-box { transform: rotateX(-10deg) rotateY(225deg) translateY(100px); }
        .container.open .jiggle-container { animation: none; }

        /* Box Faces */
        .face {
            position: absolute;
            width: 200px; height: 200px;
            background: rgba(255, 42, 109, 0.15);
            border: 2.5px solid var(--primary);
            box-shadow: inset 0 0 40px rgba(255, 42, 109, 0.4), 0 0 20px rgba(255, 42, 109, 0.2);
            backdrop-filter: blur(8px);
            display: flex; justify-content: center; align-items: center;
            color: white; font-size: 22px; font-weight: bold;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            backface-visibility: visible;
        }

        .face::after {
            content: ''; position: absolute;
            background: var(--secondary);
            box-shadow: 0 0 15px var(--secondary);
        }
        .front::after, .back::after, .left::after, .right::after { width: 30px; height: 100%; }
        .top::after { width: 100%; height: 30px; }

        .front  { transform: rotateY(0deg) translateZ(100px); }
        .back   { transform: rotateY(180deg) translateZ(100px); }
        .right  { transform: rotateY(90deg) translateZ(100px); }
        .left   { transform: rotateY(-90deg) translateZ(100px); }
        .bottom { transform: rotateX(-90deg) translateZ(100px); background: #000; }
        .top    { transform: rotateX(90deg) translateZ(100px); z-index: 2; transform-origin: top; background: rgba(255, 42, 109, 0.4); }

        /* Unfolding Logic */
        .container.open .front  { transform: rotateX(-110deg) translateZ(100px) translateY(100px); opacity: 0.1; }
        .container.open .back   { transform: rotateX(110deg) translateZ(100px) translateY(-100px); opacity: 0.1; }
        .container.open .left   { transform: rotateY(-90deg) rotateX(-110deg) translateZ(100px) translateY(100px); opacity: 0.1; }
        .container.open .right  { transform: rotateY(90deg) rotateX(-110deg) translateZ(100px) translateY(100px); opacity: 0.1; }
        .container.open .top    { transform: rotateX(140deg) translateZ(180px) translateY(-500px) scale(0); opacity: 0; }

        /* Inside Message Card */
        .message-card {
            position: absolute;
            width: 220px; height: 220px;
            background: rgba(255, 255, 255, 0.98);
            top: -10px; left: -10px;
            transform: translateZ(0px) scale(0);
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            text-align: center; padding: 25px; border-radius: 20px;
            transition: all 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.9);
            box-sizing: border-box;
            pointer-events: none;
        }

        .container.open .message-card {
            transform: translateZ(250px) scale(1.4) rotateY(-180deg);
            pointer-events: auto;
        }

        #quote-text { font-size: 14px; color: #333; font-style: italic; margin: 10px 0; line-height: 1.4; }
        #quote-author { font-size: 11px; font-weight: bold; color: var(--primary); text-transform: uppercase; }

        .heart-icon { color: var(--primary); font-size: 35px; animation: beat 0.8s infinite; }

        /* Animations */
        @keyframes floatAndGlow {
            0%, 100% { transform: rotateX(-20deg) rotateY(45deg) translateY(0); }
            50% { transform: rotateX(-20deg) rotateY(50deg) translateY(-20px); }
        }

        @keyframes temptingJiggle {
            0%, 85%, 100% { transform: rotateZ(0); }
            88% { transform: rotateZ(4deg); }
            92% { transform: rotateZ(-4deg); }
        }

        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        .instruction {
            position: absolute; bottom: 50px;
            color: var(--secondary); text-transform: uppercase;
            letter-spacing: 4px; font-size: 14px;
            transition: all 0.5s ease;
        }
        .pulse-text { animation: pulseText 2s infinite; }
        @keyframes pulseText { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
    </style>
</head>
<body>

    <div class="stars-container" id="stars"></div>

    <div class="container" id="mainContainer" onclick="toggleBox()">
        <div class="gift-box floating" id="giftBox">
            <div class="jiggle-container">
                <div class="face front">KHACEE</div>
                <div class="face back">KHACEE</div>
                <div class="face right">KHACEE</div>
                <div class="face left">KHACEE</div>
                <div class="face top">OPEN ME</div>
                <div class="face bottom"></div>
            </div>

            <div class="message-card">
                <div class="heart-icon">‚ù§</div>
                <p id="quote-text">Sending love to the cloud...</p>
                <div id="quote-author">Please Wait</div>
            </div>
        </div>
    </div>

    <div class="instruction pulse-text" id="statusText">A special surprise for Khacee...</div>

    <script>
        // Integrated your specific Vercel API
        const fetchQuote = async (category = "love") => {
            const textElement = document.getElementById('quote-text');
            const authorElement = document.getElementById('quote-author');
            
            try {
                const response = await fetch(
                    `https://my-vercel-quote.vercel.app/api/quote?tags=${category}`
                );
                const data = await response.json();
                
                textElement.innerText = `"${data.content}"`;
                authorElement.innerText = `- ${data.author}`;
            } catch (error) {
                textElement.innerText = "You are the most beautiful part of my universe.";
                authorElement.innerText = "- Your Forever Love";
            }
        };

        function toggleBox() {
            const container = document.getElementById('mainContainer');
            const giftBox = document.getElementById('giftBox');
            const statusText = document.getElementById('statusText');
            
            const isOpen = container.classList.toggle('open');
            
            if (isOpen) {
                fetchQuote(); // Trigger your API call on open
                giftBox.classList.remove('floating');
                statusText.innerText = "Click again to close";
                statusText.style.color = "#ff2a6d";
                statusText.classList.remove('pulse-text');
            } else {
                // Return to tempting state
                setTimeout(() => {
                    if (!container.classList.contains('open')) {
                        giftBox.classList.add('floating');
                    }
                }, 800);
                statusText.innerText = "A special surprise for Khacee...";
                statusText.style.color = "var(--secondary)";
                statusText.classList.add('pulse-text');
            }
        }

        // Background Stars
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 150; i++) {
            const star = document.createElement('div');
            star.style.position = 'absolute';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.width = Math.random() * 3 + 'px';
            star.style.height = star.style.width;
            star.style.backgroundColor = '#fff';
            star.style.borderRadius = '50%';
            star.style.opacity = Math.random();
            starsContainer.appendChild(star);
        }
    </script>
</body>
</html>